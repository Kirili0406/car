<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Админка бронирования</title>
<style>
  body { background:#111; color:#eee; font-family:"Montserrat",sans-serif; padding:20px; text-align:center; }
  h1 { margin-bottom:20px; }
  .login-container { max-width:300px; margin:50px auto; background:#222; padding:20px; border-radius:12px; }
  input { width:100%; padding:10px; margin:10px 0; border-radius:5px; border:none; }
  .btn { padding:10px 15px; border:none; border-radius:5px; background:#a97b50; color:#fff; cursor:pointer; width:100%; }
  .admin-container { display:grid; grid-template-columns:repeat(auto-fit, minmax(250px,1fr)); gap:20px; margin-top:20px; }
  .admin-card { background:#222; padding:15px; border-radius:12px; text-align:center; }
  .admin-card img { width:100%; height:150px; object-fit:cover; border-radius:8px; margin-bottom:10px; }
  .booking-item { margin:5px 0; padding:5px; border-radius:5px; display:flex; justify-content:space-between; align-items:center; background:#444; }
  .booking-item.confirmed { background:#e74c3c; color:#fff; }
  .booking-item.pending { background:#2ecc71; color:#fff; }
</style>
</head>
<body>

<h1>Админка бронирования</h1>

<div class="login-container" id="loginForm">
  <h2>Вход для администратора</h2>
  <input type="text" id="loginInput" placeholder="Логин">
  <input type="password" id="passwordInput" placeholder="Пароль">
  <button class="btn" id="loginBtn">Войти</button>
  <p id="loginError" style="color:red;"></p>
</div>

<div class="admin-container" id="adminList" style="display:none;"></div>

<script>
const ADMIN_LOGIN = "admin";
const ADMIN_PASSWORD = "1234";

const loginForm = document.getElementById("loginForm");
const loginBtn = document.getElementById("loginBtn");
const loginError = document.getElementById("loginError");
const adminList = document.getElementById("adminList");

loginBtn.onclick = () => {
  const login = document.getElementById("loginInput").value.trim();
  const password = document.getElementById("passwordInput").value.trim();

  if(login === ADMIN_LOGIN && password === ADMIN_PASSWORD){
    // Успешный вход
    loginForm.style.display = "none";
    adminList.style.display = "grid";
    showAdmin();
  } else {
    loginError.textContent = "Неверный логин или пароль!";
  }
};

// Код админки
let cars = JSON.parse(localStorage.getItem("funeralBookings")) || [];

function showAdmin() {
  adminList.innerHTML = "";

  cars.forEach(car=>{
    const card = document.createElement("div");
    card.className = "admin-card";
    card.innerHTML = `<img src="${car.photo}" alt="${car.name}"><h3>${car.name} (${car.plate})</h3>`;

    car.bookings.forEach(b=>{
      if(!b.expired){
        const div = document.createElement("div");
        div.className = "booking-item";
        div.textContent = `${b.date} ${b.time} - ${b.client}`;

        if(b.confirmed) div.classList.add("confirmed");
        else div.classList.add("pending");

        if(!b.confirmed){
          const approveBtn = document.createElement("button");
          approveBtn.className = "btn";
          approveBtn.textContent = "Одобрить";
          approveBtn.onclick = () => {
            b.confirmed = true;
            localStorage.setItem("funeralBookings", JSON.stringify(cars));
            showAdmin();
          };
          div.appendChild(approveBtn);
        }

        card.appendChild(div);
      }
    });

    adminList.appendChild(card);
  });
}
</script>

</body>
</html>
